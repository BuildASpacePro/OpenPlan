import{j as e}from"./ViewToggle.-WxgrB4c.js";import{R as O,r as R}from"./index.B52nOzfP.js";function F({events:h,satellites:k,timeView:n,onTimeViewChange:S}){const[i,u]=R.useState(0),$=[{label:"1 Hour",value:"hour"},{label:"1 Day",value:"day"},{label:"1 Week",value:"week"},{label:"1 Month",value:"month"}],v=["health","payload","AOCS","communication","maintenance","access_window"],g={health:"#10B981",payload:"#3B82F6",AOCS:"#F59E0B",communication:"#8B5CF6",maintenance:"#EF4444",access_window:"#6B7280"},M=t=>{switch(t){case"hour":return 60*60*1e3;case"day":return 24*60*60*1e3;case"week":return 7*24*60*60*1e3;case"month":return 30*24*60*60*1e3;default:return 24*60*60*1e3}},x=(t,d)=>{const a=new Date(t);switch(d){case"hour":return a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});case"day":return a.toLocaleDateString([],{month:"short",day:"numeric"})+" "+a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});case"week":case"month":return a.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"});default:return a.toLocaleString()}};if(!h||h.length===0)return e.jsx("div",{className:"p-8 text-center text-gray-500 border rounded-lg bg-gray-50",children:e.jsx("p",{children:"No timeline events available."})});const p=h.map(t=>new Date(t.planned_time).getTime()).filter(t=>!isNaN(t));if(p.length===0)return e.jsx("div",{className:"p-8 text-center text-gray-500 border rounded-lg bg-gray-50",children:e.jsx("p",{children:"No valid timeline events found."})});const f=Math.min(...p),E=Math.max(...p)-f,l=M(n),o=f+i,y=o+l,j=Math.max(0,E-l),w=l/4,D=()=>{u(Math.max(i-w,0))},L=()=>{u(Math.min(i+w,j))},b=(()=>{const t=[];for(let a=0;a<=8;a++){const c=o+a/8*l,r=a/8*100;t.push({timestamp:c,position:r,label:x(c,n)})}return t})();return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:D,disabled:i<=0,className:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"◀ Earlier"}),e.jsx("button",{onClick:L,disabled:i>=j,className:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Later ▶"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Time Range:"}),e.jsx("select",{value:n,onChange:t=>{S(t.target.value),u(0)},className:"border rounded px-3 py-2 bg-white",children:$.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600 text-center",children:["Showing: ",x(o,n)," - ",x(y,n)]}),e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:e.jsx("div",{className:"flex flex-wrap gap-4 text-sm",children:v.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:g[t]}}),e.jsx("span",{className:"font-medium capitalize",children:t.replace("_"," ")})]},t))})}),e.jsxs("div",{className:"border rounded-lg bg-white shadow-sm overflow-hidden",children:[e.jsx("div",{className:"border-b bg-gray-50",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-64 px-4 py-3 font-semibold border-r bg-gray-100",children:"Satellite / Event Type"}),e.jsx("div",{className:"flex-1 relative h-12",children:b.map((t,d)=>e.jsx("div",{className:"absolute top-0 h-full border-l border-gray-200 text-xs text-gray-600",style:{left:`${t.position}%`},children:e.jsx("div",{className:"p-1 transform -rotate-45 origin-top-left whitespace-nowrap",children:t.label})},d))})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:k.map((t,d)=>{const a=h.filter(r=>r.satellite_name===t),c=v.filter(r=>a.some(m=>m.event_type===r));return e.jsxs("div",{className:"border-b-2 border-gray-300",children:[e.jsxs("div",{className:"flex bg-gray-100 font-semibold",children:[e.jsx("div",{className:"w-64 px-4 py-2 border-r bg-gray-200",children:t}),e.jsx("div",{className:"flex-1 relative h-8",children:b.map((r,m)=>e.jsx("div",{className:"absolute top-0 h-full border-l border-gray-200",style:{left:`${r.position}%`}},m))})]}),c.map((r,m)=>{const N=a.filter(s=>s.event_type===r&&new Date(s.planned_time).getTime()>=o&&new Date(s.planned_time).getTime()<=y);return e.jsxs("div",{className:`flex border-b hover:bg-gray-50 ${m%2===0?"bg-white":"bg-gray-25"}`,children:[e.jsxs("div",{className:"w-64 px-6 py-3 text-sm border-r flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:g[r]}}),e.jsx("span",{className:"capitalize",children:r.replace("_"," ")})]}),e.jsxs("div",{className:"flex-1 relative h-12 min-w-0",children:[b.map((s,_)=>e.jsx("div",{className:"absolute top-0 h-full border-l border-gray-100",style:{left:`${s.position}%`}},_)),N.map(s=>{const T=(new Date(s.planned_time).getTime()-o)/l*100,C=s.duration||30,B=Math.max(C*60*1e3/l*100,1);return e.jsx("div",{className:"absolute top-1 h-10 rounded text-xs text-white flex items-center justify-center shadow-sm cursor-pointer hover:shadow-md transition-shadow border border-white",style:{left:`${Math.max(0,Math.min(T,100))}%`,width:`${Math.min(B,100-T)}%`,backgroundColor:g[s.event_type]||"#3B82F6",minWidth:"2px"},title:`${s.activity_type||"Event"} (${C} min)
Type: ${s.event_type}
Time: ${x(new Date(s.planned_time).getTime(),"day")}
Satellite: ${s.satellite_name}`,children:e.jsx("span",{className:"truncate px-1 font-medium",children:s.activity_type||"Event"})},s.event_id||`${s.satellite_name}-${s.planned_time}`)}),N.length===0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 text-xs",children:"No events in this time range"})]})]},`${t}-${r}`)}),c.length===0&&e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-64 px-6 py-4 text-sm text-gray-500 border-r",children:"No events"}),e.jsx("div",{className:"flex-1 relative h-12 flex items-center justify-center text-gray-400 text-sm",children:"No events for this satellite"})]})]},t)})})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[e.jsx("p",{children:"• Each satellite is divided into rows by event type"}),e.jsx("p",{children:"• Scroll through time using the navigation buttons"}),e.jsx("p",{children:"• Change time range to zoom in/out of the timeline"}),e.jsx("p",{children:"• Hover over events for detailed information"})]})]})}const H=O.memo(F);export{H as default};
