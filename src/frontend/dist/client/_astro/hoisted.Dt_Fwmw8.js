import"./hoisted.ubEzurhk.js";const u="http://localhost:3000";function m(){const e={tabTarget:"formTarget",tabSatellite:"formSatellite",tabGroundStation:"formGroundStation"};Object.keys(e).forEach(t=>{document.getElementById(t).addEventListener("click",()=>{Object.values(e).forEach(a=>{document.getElementById(a).classList.add("hidden")}),Object.keys(e).forEach(a=>{const o=document.getElementById(a);o.classList.remove("bg-astro-blue","text-white"),o.classList.add("text-gray-700","hover:bg-gray-100")}),document.getElementById(e[t]).classList.remove("hidden");const n=document.getElementById(t);n.classList.add("bg-astro-blue","text-white"),n.classList.remove("text-gray-700","hover:bg-gray-100")})})}function r(e,t,n=!1){const a=document.getElementById(e);a.textContent=t,a.classList.remove("hidden"),setTimeout(()=>{a.classList.add("hidden")},5e3)}function d(e){document.getElementById(e).classList.add("hidden")}function f(){document.getElementById("targetForm").addEventListener("submit",async e=>{e.preventDefault(),d("targetError"),d("targetSuccess");const t=new FormData(e.target),n={name:t.get("name"),latitude:parseFloat(t.get("latitude")),longitude:parseFloat(t.get("longitude")),altitude:parseFloat(t.get("altitude")),start_time:t.get("start_time"),end_time:t.get("end_time")};try{console.log("Target data to submit:",n),r("targetSuccess","Target data prepared (endpoint not implemented yet)",!1),e.target.reset()}catch(a){r("targetError","Failed to add target: "+a.message,!0)}})}function h(){document.getElementById("satelliteForm").addEventListener("submit",async e=>{e.preventDefault(),d("satelliteError"),d("satelliteSuccess");const t=new FormData(e.target),a=t.get("tle").trim().split(`
`).map(s=>s.trim()).filter(s=>s.length>0);if(a.length<2){r("satelliteError","TLE data must contain at least 2 lines",!0);return}const o=a.find(s=>s.startsWith("1 ")),i=a.find(s=>s.startsWith("2 "));if(!o||!i){r("satelliteError",'TLE data must contain lines starting with "1 " and "2 "',!0);return}const g={name:t.get("name"),mission:t.get("mission"),colour:t.get("colour"),mission_start_time:t.get("mission_start_time"),tle_1:o,tle_2:i};try{const s=window.getAuthHeaders?window.getAuthHeaders():{"Content-Type":"application/json"},l=await fetch(`${u}/api/satellites`,{method:"POST",headers:s,body:JSON.stringify(g)});if(l.ok){const c=await l.json();r("satelliteSuccess",`Satellite "${c.name}" added successfully!`,!1),e.target.reset()}else{const c=await l.json();r("satelliteError",c.error||"Failed to add satellite",!0)}}catch(s){r("satelliteError","Network error: "+s.message,!0)}})}function E(){document.getElementById("groundStationForm").addEventListener("submit",async e=>{e.preventDefault(),d("gsError"),d("gsSuccess");const t=new FormData(e.target),n={name:t.get("name"),latitude:parseFloat(t.get("latitude")),longitude:parseFloat(t.get("longitude")),altitude:parseFloat(t.get("altitude"))};try{const a=window.getAuthHeaders?window.getAuthHeaders():{"Content-Type":"application/json"},o=await fetch(`${u}/api/groundstations`,{method:"POST",headers:a,body:JSON.stringify(n)});if(o.ok){const i=await o.json();r("gsSuccess",`Ground station "${i.name}" added successfully!`,!1),e.target.reset()}else{const i=await o.json();r("gsError",i.error||"Failed to add ground station",!0)}}catch(a){r("gsError","Network error: "+a.message,!0)}})}document.addEventListener("DOMContentLoaded",function(){m(),f(),h(),E()});
