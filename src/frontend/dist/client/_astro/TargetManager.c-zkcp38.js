import{j as e,V as _}from"./ViewToggle.-WxgrB4c.js";import{R as M,r as l}from"./index.B52nOzfP.js";function V({targets:i=[]}){const[o,c]=l.useState("name"),[g,j]=l.useState("asc"),[p,N]=l.useState("all"),[u,w]=l.useState("all"),[h,f]=l.useState("all"),b=l.useMemo(()=>{let t=i;return p!=="all"&&(t=t.filter(a=>a.target_type===p)),u!=="all"&&(t=t.filter(a=>a.priority===u)),h!=="all"&&(t=t.filter(a=>a.status===h)),t.sort((a,S)=>{let n=a[o],d=S[o];return(o==="created_at"||o==="updated_at")&&(n=new Date(n),d=new Date(d)),(o==="coordinate1"||o==="coordinate2")&&(n=parseFloat(n),d=parseFloat(d)),typeof n=="string"&&(n=n.toLowerCase(),d=d.toLowerCase()),g==="asc"?n<d?-1:n>d?1:0:n>d?-1:n<d?1:0})},[i,o,g,p,u,h]),x=t=>{o===t?j(g==="asc"?"desc":"asc"):(c(t),j("asc"))},k=t=>{if(!t)return"-";try{return new Date(t).toLocaleString()}catch{return t}},v=t=>t==null?"-":parseFloat(t).toFixed(6),m=t=>o!==t?e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):g==="asc"?e.jsx("svg",{className:"w-4 h-4 text-astro-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}):e.jsx("svg",{className:"w-4 h-4 text-astro-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"})}),r=t=>({celestial:"bg-purple-100 text-purple-800",geographic:"bg-orange-100 text-orange-800",objective:"bg-blue-100 text-blue-800"})[t]||"bg-gray-100 text-gray-800",s=t=>({high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"})[t]||"bg-gray-100 text-gray-800",y=t=>({active:"bg-green-100 text-green-800",planned:"bg-blue-100 text-blue-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",C=l.useMemo(()=>{const t=new Set(i.map(a=>a.target_type));return Array.from(t)},[i]),L=l.useMemo(()=>{const t=new Set(i.map(a=>a.priority));return Array.from(t)},[i]),T=l.useMemo(()=>{const t=new Set(i.map(a=>a.status));return Array.from(t)},[i]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type:"}),e.jsxs("select",{id:"type-filter",value:p,onChange:t=>N(t.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-astro-blue focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),C.map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority:"}),e.jsxs("select",{id:"priority-filter",value:u,onChange:t=>w(t.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-astro-blue focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Priorities"}),L.map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status:"}),e.jsxs("select",{id:"status-filter",value:h,onChange:t=>f(t.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-astro-blue focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Statuses"}),T.map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",b.length," of ",i.length," targets"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("name"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Name"}),m("name")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("target_type"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Type"}),m("target_type")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("coordinate1"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Coordinate 1"}),m("coordinate1")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("coordinate2"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Coordinate 2"}),m("coordinate2")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("priority"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Priority"}),m("priority")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("status"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Status"}),m("status")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>x("created_at"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Created"}),m("created_at")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r(t.target_type)}`,children:t.target_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:v(t.coordinate1)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:v(t.coordinate2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s(t.priority)}`,children:t.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(t.status)}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"max-w-xs truncate",title:t.description,children:t.description||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(t.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-astro-blue hover:text-astro-light",onClick:()=>console.log("View target:",t.target_id),title:"View Details",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{className:"text-yellow-600 hover:text-yellow-500",onClick:()=>console.log("Edit target:",t.target_id),title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{className:"text-red-600 hover:text-red-500",onClick:()=>console.log("Delete target:",t.target_id),title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},t.target_id))})]})}),b.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),e.jsx("p",{children:"No targets found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters"})]})]})]})}const A=M.memo(V);function W(){const[i,o]=l.useState("cards"),[c,g]=l.useState([]),[j,p]=l.useState(!0),[N,u]=l.useState(null),w=[{key:"cards",label:"Cards",icon:"grid"},{key:"table",label:"Table",icon:"table"}];l.useEffect(()=>{h()},[]);const h=async()=>{try{p(!0),u(null);const r=await fetch("/api/targets");if(!r.ok)throw new Error(`Failed to fetch targets: ${r.status}`);const s=await r.json();g(s)}catch(r){u(r.message),console.error("Error fetching targets:",r)}finally{p(!1)}},f=r=>{switch(r){case"celestial":return e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})});case"geographic":return e.jsxs("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]});case"objective":return e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}},b=r=>({celestial:"bg-purple-500",geographic:"bg-orange-500",objective:"bg-blue-500"})[r]||"bg-gray-500",x=r=>({high:"text-red-600",medium:"text-yellow-600",low:"text-green-600"})[r]||"text-gray-600",k=r=>({active:"text-green-600",planned:"text-blue-600",completed:"text-gray-600",cancelled:"text-red-600"})[r]||"text-gray-600",v=r=>r==null?"N/A":`${parseFloat(r).toFixed(4)}`,m=()=>{if(j)return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-astro-blue border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-astro-gray",children:"Loading targets data..."})]});if(N)return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Error Loading Targets"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:N})]})]}),e.jsx("button",{onClick:h,className:"mt-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm",children:"Retry"})]});const r=c.reduce((s,y)=>(s[y.target_type]||(s[y.target_type]=[]),s[y.target_type].push(y),s),{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center",children:f("celestial")}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-astro-dark",children:"Celestial Objects"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:(r.celestial||[]).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center",children:f("geographic")}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-astro-dark",children:"Geographic Locations"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:(r.geographic||[]).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:f("objective")}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-astro-dark",children:"Mission Objectives"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(r.objective||[]).length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-astro-dark mb-4",children:"All Targets"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 ${b(s.target_type)} rounded-lg flex items-center justify-center`,children:f(s.target_type)}),e.jsx("h3",{className:"font-medium text-gray-900",children:s.name})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",s.target_id]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",s.target_type]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Coordinates:"})," ",v(s.coordinate1),", ",v(s.coordinate2)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Priority:"}),e.jsx("span",{className:`ml-1 font-semibold ${x(s.priority)}`,children:s.priority})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 font-semibold ${k(s.status)}`,children:s.status})]})]}),s.description&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Description:"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:s.description})]})]}),e.jsxs("div",{className:"mt-4 flex space-x-2",children:[e.jsx("button",{className:"text-xs bg-astro-blue text-white px-2 py-1 rounded hover:bg-astro-light",children:"View Details"}),e.jsx("button",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded hover:bg-gray-200",children:"Edit"})]})]},s.target_id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-astro-dark mb-4",children:"Target Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.length}),e.jsx("p",{className:"text-sm text-blue-700",children:"Total Targets"})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.filter(s=>s.status==="active").length}),e.jsx("p",{className:"text-sm text-green-700",children:"Active"})]}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.filter(s=>s.priority==="high").length}),e.jsx("p",{className:"text-sm text-red-700",children:"High Priority"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg text-center",children:[e.jsx("p",{className:"text-lg font-bold text-purple-600",children:c.length>0?new Date(Math.max(...c.map(s=>new Date(s.created_at||0)))).toLocaleDateString():"-"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Latest Target"})]})]})]})]})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(_,{currentView:i,onViewChange:o,views:w})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:h,disabled:j,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-white",children:j?"Loading...":"Refresh Data"})}),i==="cards"?m():e.jsx(A,{targets:c})]})}export{W as default};
