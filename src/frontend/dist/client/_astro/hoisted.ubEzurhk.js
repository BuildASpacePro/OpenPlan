function a(){const t=localStorage.getItem("user"),e=localStorage.getItem("token");return{user:t?JSON.parse(t):null,token:e}}function i(){localStorage.removeItem("user"),localStorage.removeItem("token")}function l(){const t=a(),e=document.getElementById("userInfo"),u=document.getElementById("username"),d=document.getElementById("userRole"),n=document.getElementById("loginButton"),o=document.getElementById("logoutButton"),s=document.getElementById("adminButton");t.user&&t.token?(e.classList.remove("hidden"),u.textContent=t.user.username,d.textContent=t.user.role,n.classList.add("hidden"),o.classList.remove("hidden"),t.user.role==="admin"&&s.classList.remove("hidden")):(e.classList.add("hidden"),n.classList.remove("hidden"),o.classList.add("hidden"),s.classList.add("hidden"))}document.getElementById("logoutButton").addEventListener("click",()=>{i(),window.location.href="/login"});function r(){const t=new Date,e=String(t.getUTCDate()).padStart(2,"0"),u=String(t.getUTCMonth()+1).padStart(2,"0"),d=t.getUTCFullYear(),n=String(t.getUTCHours()).padStart(2,"0"),o=String(t.getUTCMinutes()).padStart(2,"0"),s=String(t.getUTCSeconds()).padStart(2,"0"),c=`${e}-${u}-${d} ${n}:${o}:${s}`;document.getElementById("utcTime").textContent=c}document.addEventListener("DOMContentLoaded",function(){l(),r(),setInterval(r,1e3)});window.getAuthHeaders=function(){const t=a();return t.token?{Authorization:`Bearer ${t.token}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"}};window.isAuthenticated=function(){const t=a();return!!(t.user&&t.token)};window.hasRole=function(t){const e=a();return e.user&&e.user.role===t};
