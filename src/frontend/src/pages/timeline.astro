---
import BaseLayout from '../layouts/BaseLayout.astro';

// Fetch timeline data from API
const response = await fetch('/api/timeline');
const timeline = response.ok ? await response.json() : [];
---

<BaseLayout title="Mission Planner - Timeline" activePage="timeline">
  <div class="space-y-8">
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-8">
      <h1 class="text-3xl font-bold text-astro-dark mb-4">Mission Timeline</h1>
      <p class="text-astro-gray mb-6">
        View and manage the complete mission timeline with key milestones and events.
      </p>

      <div class="relative">
        <!-- Timeline -->
        <div class="space-y-6">
          {timeline.length === 0 && (
            <div class="text-astro-gray">No timeline events found.</div>
          )}
          {timeline.map((event, idx) => (
            <div class="flex items-center" key={event.event_id}>
              <div class={`flex items-center justify-center w-12 h-12 rounded-full bg-${event.colour}-500`}>
                <span class="text-white font-bold">{idx + 1}</span>
              </div>
              <div class="ml-6 flex-1">
                <div class="bg-gray-50 rounded-lg p-4">
                  <h3 class="text-lg font-semibold text-astro-dark">{event.activity_type}</h3>
                  <p class="text-astro-gray">Satellite: {event.satellite_name}</p>
                  <p class="text-sm text-astro-gray mt-2">Duration: {event.duration} days</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<!-- src/frontend/src/pages/timeline.astro -->